---
interface Props {
	title: string;
	description?: string;
}

const { title, description = "David Rodriguez's personal website" } = Astro.props;
const pageTitle = title === 'Home' ? '@drodol' : `${title} | @drodol`;
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description}>
		<meta name="viewport" content="width=device-width" />

		<!-- Favicon -->
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="shortcut icon" href="/favicon.ico">

		<meta name="generator" content={Astro.generator} />
		<title>{pageTitle}</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&display=swap" rel="stylesheet">

		<script>
			// On page load or when changing themes, best to add inline in `head` to avoid FOUC
			if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
				document.documentElement.classList.add('dark')
			} else {
				document.documentElement.classList.remove('dark')
			}
		</script>
		<script defer data-domain="drodol.com" src="https://plausible.drodol.com/js/script.hash.outbound-links.tagged-events.js"></script>
		<script>window.plausible = window.plausible || function() { (window.plausible.q = window.plausible.q || []).push(arguments) }</script>

	</head>
	<body class="min-h-screen bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans">
		<header class="fixed w-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm z-50 animate-fade-in-down">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
				<div class="flex justify-between items-center py-4" x-data="{ isOpen: false }">
					<!-- Logo -->
					<a href="/" class="text-xl font-bold">@drodol</a>

					<!-- Desktop Navigation -->
					<nav class="hidden md:flex items-center space-x-8">
						<a href="/" class="hover:text-primary transition-colors">Home</a>
						<a href="/about" class="hover:text-primary transition-colors">About</a>
						<a href="/blog" class="hover:text-primary transition-colors">Blog</a>
						<a href="/now" class="hover:text-primary transition-colors">/Now</a>
						<a href="/uses" class="hover:text-primary transition-colors">Uses</a>
						<a href="/contact" class="hover:text-primary transition-colors">Contact</a>
						<button
							@click="$store.darkMode.toggle()"
							class="inline-flex items-center justify-center w-10 h-10 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
							aria-label="Toggle dark mode"
						>
							<svg
								x-show="!$store.darkMode.isDark"
								class="w-5 h-5"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
								/>
							</svg>
							<svg
								x-show="$store.darkMode.isDark"
								class="w-5 h-5"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"
								/>
							</svg>
						</button>
					</nav>

					<!-- Mobile Navigation Button and Dark Mode Toggle -->
					<div class="flex items-center space-x-4 md:hidden">
						<button
							@click="$store.darkMode.toggle()"
							class="inline-flex items-center justify-center w-10 h-10 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
							aria-label="Toggle dark mode"
						>
							<svg
								x-show="!$store.darkMode.isDark"
								class="w-5 h-5"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
								/>
							</svg>
							<svg
								x-show="$store.darkMode.isDark"
								class="w-5 h-5"
								xmlns="http://www.w3.org/2000/svg"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707"
								/>
							</svg>
						</button>
						<button
							class="inline-flex items-center justify-center w-10 h-10 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
							@click="isOpen = !isOpen"
							aria-label="Toggle menu"
						>
							<svg
								x-show="!isOpen"
								class="w-6 h-6"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M4 6h16M4 12h16M4 18h16"
								></path>
							</svg>
							<svg
								x-show="isOpen"
								class="w-6 h-6"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M6 18L18 6M6 6l12 12"
								></path>
							</svg>
						</button>
					</div>

					<!-- Mobile Navigation Menu -->
					<div
						x-show="isOpen"
						x-transition:enter="transition ease-out duration-200"
						x-transition:enter-start="opacity-0 -translate-y-4"
						x-transition:enter-end="opacity-100 translate-y-0"
						x-transition:leave="transition ease-in duration-150"
						x-transition:leave-start="opacity-100 translate-y-0"
						x-transition:leave-end="opacity-0 -translate-y-4"
						class="absolute top-full left-0 right-0 bg-white dark:bg-gray-900 shadow-lg md:hidden"
					>
						<nav class="flex flex-col space-y-4 p-4">
							<a href="/" class="hover:text-primary transition-colors">Home</a>
							<a href="/about" class="hover:text-primary transition-colors">About</a>
							<a href="/blog" class="hover:text-primary transition-colors">Blog</a>
							<a href="/now" class="hover:text-primary transition-colors">/Now</a>
							<a href="/uses" class="hover:text-primary transition-colors">Uses</a>
							<a href="/contact" class="hover:text-primary transition-colors">Contact</a>
						</nav>
					</div>
				</div>
			</div>
		</header>

		<main class="pt-24 animate-fade-in">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
				<slot />
			</div>
		</main>
	</body>
</html>

<script>
	document.addEventListener('alpine:init', () => {
		Alpine.store('darkMode', {
			isDark: document.documentElement.classList.contains('dark'),
			toggle() {
				this.isDark = !this.isDark;
				localStorage.theme = this.isDark ? 'dark' : 'light';
				if (this.isDark) {
					document.documentElement.classList.add('dark');
				} else {
					document.documentElement.classList.remove('dark');
				}
			},
		});
	});
</script>
